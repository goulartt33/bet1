<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bet Analyzer ‚öΩ</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center min-h-screen p-4">
    <h1 class="text-3xl font-bold mb-6 text-green-400">üîç Buscar Oportunidades</h1>
    <button id="buscar" class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded-lg text-lg font-semibold transition-all">
        Buscar Oportunidades
    </button>

    <div id="resultado" class="mt-8 w-full max-w-3xl bg-gray-800 rounded-xl p-6 shadow-lg hidden">
        <h2 class="text-xl font-bold mb-4">üìã Bilhetes Gerados</h2>
        <div id="bilhetes"></div>
    </div>

    <script>
        document.getElementById('buscar').addEventListener('click', async () => {
            const botao = document.getElementById('buscar');
            const resultado = document.getElementById('resultado');
            const bilhetesDiv = document.getElementById('bilhetes');

            botao.disabled = true;
            botao.innerText = "‚è≥ Buscando...";
            resultado.classList.add('hidden');
            bilhetesDiv.innerHTML = "";

            try {
                const response = await fetch('/buscar', { method: 'POST' });
                const data = await response.json();

                if (data.erro) {
                    bilhetesDiv.innerHTML = `<p class='text-red-400'>‚ùå Erro: ${data.erro}</p>`;
                } else {
                    data.dados.forEach(msg => {
                        const card = document.createElement('div');
                        card.className = "bg-gray-700 p-4 mb-3 rounded-lg";
                        card.innerHTML = `<pre class='whitespace-pre-wrap'>${msg}</pre>`;
                        bilhetesDiv.appendChild(card);
                    });
                }

                resultado.classList.remove('hidden');
            } catch (e) {
                bilhetesDiv.innerHTML = `<p class='text-red-400'>‚ùå Erro: ${e.message}</p>`;
                resultado.classList.remove('hidden');
            } finally {
                botao.disabled = false;
                botao.innerText = "Buscar Oportunidades";
            }
        });
    </script>
</body>
</html>
