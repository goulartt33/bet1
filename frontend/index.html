<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>üìä Bot de Apostas</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(to right, #ff416c, #ff4b2b);
      color: #fff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }

    h1 {
      margin-bottom: 30px;
      font-size: 2em;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
    }

    #bilhetes {
      width: 100%;
      max-width: 900px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .bilhete {
      background: rgba(255, 255, 255, 0.1);
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transition: transform 0.3s, box-shadow 0.3s, background 0.3s;
      opacity: 0;
      transform: translateY(20px);
      animation: slideIn 0.5s forwards;
    }

    .bilhete:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    }

    @keyframes slideIn {
      to { opacity: 1; transform: translateY(0); }
    }

    .title {
      font-weight: bold;
      font-size: 1.1em;
      margin-bottom: 8px;
    }

    .line { margin-bottom: 5px; }

    .high-conf { 
      border-left: 5px solid #00ff99; 
      background: rgba(0,255,153,0.15); 
    }

    button {
      margin: 30px 0;
      padding: 15px 30px;
      font-size: 1.2em;
      font-weight: bold;
      color: #ff4b2b;
      background: #fff;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      position: relative;
      overflow: hidden;
    }

    button:hover {
      background: #ffe5e0;
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
    }

    .button-pop {
      animation: pop 0.3s forwards;
    }

    @keyframes pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }

    .feedback {
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      background: #00ff99;
      color: #000;
      padding: 5px 10px;
      border-radius: 12px;
      font-weight: bold;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .feedback.show {
      opacity: 1;
    }

    .loading {
      text-align: center;
      font-size: 1.2em;
      margin-top: 20px;
    }

    @media(max-width: 500px){
      button { width: 90%; }
    }
  </style>
</head>
<body>
  <h1>üìä Bot de Apostas - Bilhetes Inteligentes</h1>
  <button id="buscarBtn">
    üéØ Buscar Oportunidades
    <span class="feedback" id="feedback">Enviado com sucesso!</span>
  </button>
  <div id="bilhetes" class="loading">Clique no bot√£o para buscar bilhetes...</div>

  <script>
    const button = document.getElementById('buscarBtn');
    const feedback = document.getElementById('feedback');
    const container = document.getElementById('bilhetes');

    button.addEventListener('click', async () => {
      // Anima√ß√£o de "pop"
      button.classList.add('button-pop');
      setTimeout(() => button.classList.remove('button-pop'), 300);

      // Mostrar feedback tempor√°rio
      feedback.classList.add('show');
      setTimeout(() => feedback.classList.remove('show'), 1500);

      // Carregar bilhetes
      container.innerHTML = 'Carregando bilhetes...';
      try {
        const res = await fetch('https://bet-2-3uvv.onrender.com/bilhetes');
        const data = await res.json();
        container.innerHTML = '';

        if(data.length === 0){
          container.innerHTML = 'Nenhum bilhete dispon√≠vel no momento.';
          return;
        }

        data.forEach((b, index) => {
          const div = document.createElement('div');
          div.className = 'bilhete';
          div.style.animationDelay = `${index * 0.1}s`;
          if(b.conf && b.conf > 0.6) div.classList.add('high-conf');

          div.innerHTML = `
            <div class="title">${b.jogo} (${b.data})</div>
            ${b.spread ? `<div class="line">üìà Spread: ${JSON.stringify(b.spread)}</div>` : ''}
            ${b.total ? `<div class="line">üî¢ Total: ${JSON.stringify(b.total)}</div>` : ''}
            ${b.ambas ? `<div class="line">ü§ù Ambas marcam: ${b.ambas}</div>` : ''}
            ${b.placar ? `<div class="line">‚öΩ Placar sugerido: ${b.placar}</div>` : ''}
            <div class="line">Confian√ßa: ${(b.conf*100).toFixed(1)}%</div>
          `;
          container.appendChild(div);
        });

        // Enviar para Telegram
        await fetch('https://bet-2-3uvv.onrender.com/send-telegram', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

      } catch (err) {
        container.innerHTML = 'Erro ao carregar bilhetes.';
        console.error(err);
      }
    });
  </script>
</body>
</html>
